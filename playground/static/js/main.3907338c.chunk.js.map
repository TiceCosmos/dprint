{"version":3,"sources":["components/CodeEditor.tsx","components/Spinner.tsx","components/ExternalLink.tsx","FormatterWorker.ts","Playground.tsx","plugins/getPluginDefaultConfig.ts","plugins/getPluginInfo.ts","utils/UrlSharer.ts","index.tsx"],"names":["Language","Spinner","props","backgroundColor","className","style","color","loading","size","CodeEditor","editor","monacoEditor","outerContainerRef","React","createRef","disposables","lastScrollTop","state","editorComponent","undefined","editorDidMount","bind","reactMonacoEditorPromise","then","language","TypeScript","languages","typescript","typescriptDefaults","setCompilerOptions","noLib","target","ScriptTarget","ESNext","allowNonTsExtensions","setDiagnosticsOptions","noSyntaxValidation","noSemanticValidation","defineTheme","base","inherit","rules","colors","setState","default","catch","err","console","error","this","updateScrollTop","updateJsonSchema","ref","getEditor","dispose","length","width","height","value","text","theme","onChange","options","automaticLayout","renderWhitespace","readOnly","readonly","minimap","enabled","quickSuggestions","rulers","lineWidth","push","onDidChangeModelContent","setPosition","column","lineNumber","onDidScrollChange","e","scrollTopChanged","onScrollTopChange","scrollTop","lastHeight","lastWidth","intervalId","setInterval","containerElement","current","offsetWidth","offsetHeight","layout","clearInterval","setTimeout","setScrollTop","jsonSchemaUrl","json","jsonDefaults","diagnosticsOptions","schemas","uri","validate","allowComments","enableSchemaRequest","fileMatch","Component","ExternalLink","id","href","url","rel","formatterWorker","Worker","formatListeners","errorListeners","addEventListener","ev","data","type","listener","message","Playground","configText","onConfigTextChanged","onTextChanged","formattedText","fileExtensions","selectedPlugin","plugins","onSelectPlugin","isLoading","useState","fileExtension","setFileExtension","useEffect","timeout","filePath","fileText","postMessage","clearTimeout","config","JSON","parse","useMemo","parseInt","isNaN","onFileExtensionChange","useCallback","event","split","defaultSize","allowResize","minSize","pane1Style","overflowX","overflowY","pane2Style","flex","display","selectedIndex","map","pluginInfo","i","key","ext","Json","configSchemaUrl","plugin","a","fetch","response","wroteProperty","Object","keys","properties","propertyName","property","defaultValue","definitions","toString","schemaVersion","Error","typescriptPlugin","latest","find","p","configKey","jsonPlugin","markdownPlugin","Markdown","decompress","decompressFromEncodedURIComponent","trim","urlSaver","locationHash","document","location","hash","matches","exec","getText","getConfigText","getLanguage","window","history","replaceState","compressToEncodedURIComponent","initialUrl","getUrlInfo","isFirstLoad","Loader","setPlugins","setPlugin","setFileExtensions","setText","setConfigText","defaultConfigText","setDefaultConfigText","setFormattedText","setIsLoading","getPluginInfo","alert","updateUrl","defaultConfigPromise","getPluginDefaultConfig","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3907338c.chunk.js","sourcesContent":["import type * as monacoEditorForTypes from \"monaco-editor\";\nimport React from \"react\";\nimport type ReactMonacoEditorForTypes from \"react-monaco-editor\";\nimport { Spinner } from \"./Spinner\";\n\nexport interface CodeEditorProps {\n    onChange?: (text: string) => void;\n    text?: string;\n    readonly?: boolean;\n    lineWidth?: number;\n    scrollTop?: number;\n    jsonSchemaUrl?: string;\n    onScrollTopChange?: (scrollTop: number) => void;\n    language: Language;\n}\n\nexport enum Language {\n    TypeScript = \"typescript\",\n    Json = \"json\",\n    Markdown = \"markdown\",\n}\n\nexport interface CodeEditorState {\n    editorComponent: (typeof ReactMonacoEditorForTypes) | undefined | false;\n}\n\nexport class CodeEditor extends React.Component<CodeEditorProps, CodeEditorState> {\n    private editor: monacoEditorForTypes.editor.IStandaloneCodeEditor | undefined;\n    private monacoEditor: typeof monacoEditorForTypes | undefined;\n    private outerContainerRef = React.createRef<HTMLDivElement>();\n    private disposables: monacoEditorForTypes.IDisposable[] = [];\n\n    constructor(props: CodeEditorProps) {\n        super(props);\n        this.state = {\n            editorComponent: undefined,\n        };\n        this.editorDidMount = this.editorDidMount.bind(this);\n\n        const reactMonacoEditorPromise = import(\"react-monaco-editor\");\n        import(\"monaco-editor\").then(monacoEditor => {\n            this.monacoEditor = monacoEditor;\n            if (this.props.language === Language.TypeScript) {\n                monacoEditor.languages.typescript.typescriptDefaults.setCompilerOptions({\n                    noLib: true,\n                    target: monacoEditor.languages.typescript.ScriptTarget.ESNext,\n                    allowNonTsExtensions: true,\n                });\n                monacoEditor.languages.typescript.typescriptDefaults.setDiagnosticsOptions({\n                    noSyntaxValidation: true,\n                    noSemanticValidation: true,\n                });\n            }\n\n            monacoEditor.editor.defineTheme(\"dprint-theme\", {\n                base: \"vs-dark\",\n                inherit: true,\n                rules: [],\n                colors: {\n                    \"editorRuler.foreground\": \"#283430\",\n                },\n            });\n\n            reactMonacoEditorPromise.then(editor => {\n                this.setState({ editorComponent: editor.default });\n            }).catch(err => {\n                console.error(err);\n                this.setState({ editorComponent: false });\n            });\n        }).catch(err => {\n            console.error(err);\n            this.setState({ editorComponent: false });\n        });\n    }\n\n    render() {\n        this.updateScrollTop();\n        this.updateJsonSchema();\n\n        return (\n            <div className=\"codeEditor\" ref={this.outerContainerRef}>\n                {this.getEditor()}\n            </div>\n        );\n    }\n\n    componentWillUnmount() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n        this.disposables.length = 0; // clear\n    }\n\n    private getEditor() {\n        if (this.state.editorComponent == null) {\n            return <Spinner backgroundColor=\"#1e1e1e\" />;\n        }\n        if (this.state.editorComponent === false) {\n            return <div className={\"errorMessage\"}>Error loading code editor. Please refresh the page to try again.</div>;\n        }\n\n        return (\n            <this.state.editorComponent\n                width=\"100%\"\n                height=\"100%\"\n                value={this.props.text}\n                theme=\"dprint-theme\"\n                language={this.props.language}\n                onChange={text => this.props.onChange && this.props.onChange(text)}\n                editorDidMount={this.editorDidMount}\n                options={{\n                    automaticLayout: false,\n                    renderWhitespace: \"all\",\n                    readOnly: this.props.readonly || false,\n                    minimap: { enabled: false },\n                    quickSuggestions: false,\n                    rulers: this.props.lineWidth == null ? [] : [this.props.lineWidth],\n                }}\n            />\n        );\n    }\n\n    private editorDidMount(editor: monacoEditorForTypes.editor.IStandaloneCodeEditor) {\n        this.editor = editor;\n\n        this.disposables.push(this.editor.onDidChangeModelContent(() => {\n            if (this.props.readonly) {\n                this.editor!.setPosition({\n                    column: 1,\n                    lineNumber: 1,\n                });\n            }\n        }));\n\n        this.disposables.push(this.editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this.props.onScrollTopChange) {\n                this.props.onScrollTopChange(e.scrollTop);\n            }\n        }));\n\n        // manually refresh the layout of the editor (lightweight compared to monaco editor)\n        let lastHeight = 0;\n        let lastWidth = 0;\n        const intervalId = setInterval(() => {\n            const containerElement = this.outerContainerRef.current;\n            if (containerElement == null) {\n                return;\n            }\n\n            const width = containerElement.offsetWidth;\n            const height = containerElement.offsetHeight;\n            if (lastHeight === height && lastWidth === width) {\n                return;\n            }\n\n            editor.layout();\n\n            lastHeight = height;\n            lastWidth = width;\n        }, 500);\n        this.disposables.push({ dispose: () => clearInterval(intervalId) });\n    }\n\n    private lastScrollTop = 0;\n    private updateScrollTop() {\n        if (this.editor == null || this.lastScrollTop === this.props.scrollTop) {\n            return;\n        }\n\n        // todo: not sure how to not do this in the render method? I'm not a react/web person.\n        setTimeout(() => {\n            if (this.props.scrollTop != null) {\n                this.editor!.setScrollTop(this.props.scrollTop);\n                this.lastScrollTop = this.props.scrollTop;\n            }\n        }, 0);\n    }\n\n    private updateJsonSchema() {\n        if (this.monacoEditor != null && this.props.jsonSchemaUrl != null) {\n            if (this.monacoEditor.languages.json.jsonDefaults.diagnosticsOptions.schemas?.[0]?.uri !== this.props.jsonSchemaUrl) {\n                this.monacoEditor.languages.json.jsonDefaults.setDiagnosticsOptions({\n                    validate: true,\n                    allowComments: true,\n                    enableSchemaRequest: true,\n                    schemas: [{\n                        uri: this.props.jsonSchemaUrl,\n                        fileMatch: [\"*\"],\n                    }],\n                });\n            }\n        }\n    }\n}\n","import React from \"react\";\nimport { BeatLoader } from \"react-spinners\";\n\nexport function Spinner(props: { backgroundColor?: string }) {\n    const { backgroundColor } = props;\n    return (\n        <div className={\"verticallyCenter horizontallyCenter fillHeight\"} style={{ backgroundColor }}>\n            <BeatLoader color={\"#fff\"} loading={true} size={25} />\n        </div>\n    );\n}\n","import React from \"react\";\n\nexport function ExternalLink(props: { text: string; url: string; id?: string }): React.ReactElement {\n    return <a id={props.id} href={props.url} rel=\"noopener noreferrer\">{props.text}</a>;\n}\n","const formatterWorker = new Worker(\"/playground/formatter.worker.js\");\nconst formatListeners: ((text: string) => void)[] = [];\nconst errorListeners: ((err: string) => void)[] = [];\n\nformatterWorker.addEventListener(\"message\", ev => {\n    switch (ev.data.type) {\n        case \"Format\":\n            for (const listener of formatListeners) {\n                listener(ev.data.text);\n            }\n            break;\n        case \"Error\":\n            for (const listener of errorListeners) {\n                listener(ev.data.message);\n            }\n            break;\n    }\n});\n\nexport function loadUrl(url: string) {\n    formatterWorker.postMessage({\n        type: \"LoadUrl\",\n        url,\n    });\n}\n\nexport function setConfig(config: any) {\n    formatterWorker.postMessage({\n        type: \"SetConfig\",\n        config,\n    });\n}\n\nexport function formatText(filePath: string, fileText: string) {\n    formatterWorker.postMessage({\n        type: \"Format\",\n        filePath,\n        fileText,\n    });\n}\n\nexport function addOnFormat(listener: (text: string) => void) {\n    formatListeners.push(listener);\n}\n\nexport function removeOnFormat(listener: (text: string) => void) {\n    const index = formatListeners.indexOf(listener);\n    if (index >= 0) {\n        formatListeners.splice(index, 1);\n    }\n}\n\nexport function addOnError(listener: (err: string) => void) {\n    errorListeners.push(listener);\n}\n\nexport function removeOnError(listener: (err: string) => void) {\n    const index = errorListeners.indexOf(listener);\n    if (index >= 0) {\n        errorListeners.splice(index, 1);\n    }\n}\n","import React, { ChangeEvent, useCallback, useEffect, useMemo, useState } from \"react\";\nimport SplitPane from \"react-split-pane\";\nimport \"./external/react-splitpane.css\";\nimport { CodeEditor, ExternalLink, Language } from \"./components\";\nimport { Spinner } from \"./components\";\nimport * as formatterWorker from \"./FormatterWorker\";\nimport \"./Playground.css\";\nimport { PluginInfo } from \"./plugins\";\n\nexport interface PlaygroundProps {\n    configText: string;\n    onConfigTextChanged: (text: string) => void;\n    text: string;\n    onTextChanged: (text: string) => void;\n    formattedText: string;\n    fileExtensions: string[];\n    selectedPlugin: PluginInfo;\n    plugins: PluginInfo[];\n    onSelectPlugin: (plugin: PluginInfo) => void;\n    isLoading: boolean;\n}\n\nexport function Playground({\n    configText,\n    onConfigTextChanged,\n    text,\n    onTextChanged,\n    formattedText,\n    fileExtensions,\n    selectedPlugin,\n    plugins,\n    onSelectPlugin,\n    isLoading,\n}: PlaygroundProps) {\n    const [scrollTop, setScrollTop] = useState(0);\n    const [fileExtension, setFileExtension] = useState<string | undefined>(undefined);\n\n    useEffect(() => {\n        setFileExtension(fileExtensions[0]);\n    }, [fileExtensions]);\n\n    useEffect(() => {\n        const timeout = setTimeout(() => {\n            formatterWorker.formatText(\"file.\" + fileExtension ?? \"ts\", text);\n        }, 250);\n\n        return () => clearTimeout(timeout);\n    }, [fileExtension, text]);\n\n    useEffect(() => {\n        const timeout = setTimeout(() => {\n            let config;\n            try {\n                config = JSON.parse(configText);\n                if (config.lineWidth == null) {\n                    config.lineWidth = 80;\n                }\n                formatterWorker.setConfig(config);\n            } catch (err) {\n                // ignore for now\n            }\n        }, 250);\n\n        return () => clearTimeout(timeout);\n    }, [configText]);\n\n    const lineWidth = useMemo(() => {\n        try {\n            const lineWidth = parseInt(JSON.parse(configText).lineWidth, 10);\n            if (!isNaN(lineWidth)) {\n                return lineWidth;\n            }\n        } catch (err) {\n            // ignore\n        }\n        return 80;\n    }, [configText]);\n    const onFileExtensionChange = useCallback((event: ChangeEvent<HTMLSelectElement>) => {\n        setFileExtension(event.target.value);\n    }, [setFileExtension]);\n\n    return (\n        <div className=\"App\">\n            <SplitPane split=\"horizontal\" defaultSize={53} allowResize={false}>\n                <header className=\"appHeader\">\n                    <h1 id=\"title\">dprint - Playground</h1>\n                    <div id=\"headerRight\">\n                        <a href=\"/overview\">Overview</a>\n                        <a href=\"/playground\">Playground</a>\n                        <a href=\"/sponsor\">Sponsor</a>\n                        <ExternalLink url=\"https://github.com/dprint/dprint\" text=\"View on GitHub\" />\n                    </div>\n                </header>\n                <SplitPane\n                    split=\"vertical\"\n                    minSize={50}\n                    defaultSize=\"50%\"\n                    allowResize={true}\n                    pane1Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                    pane2Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                >\n                    <SplitPane\n                        split=\"horizontal\"\n                        allowResize={true}\n                        defaultSize=\"60%\"\n                        pane1Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                        pane2Style={{ overflowX: \"hidden\", overflowY: \"hidden\" }}\n                    >\n                        <div className=\"container\">\n                            <div className=\"playgroundSubTitle\">\n                                <div className=\"row\">\n                                    <div className=\"column\">\n                                        Plugin:\n                                    </div>\n                                    <div className=\"column\" style={{ flex: 1, display: \"flex\" }}>\n                                        <select onChange={e => onSelectPlugin(plugins[e.target.selectedIndex])} style={{ flex: 1 }} value={selectedPlugin.url}>\n                                            {plugins.map((pluginInfo, i) => {\n                                                return <option key={i} value={pluginInfo.url}>\n                                                    {pluginInfo.url}\n                                                </option>;\n                                            })}\n                                        </select>\n                                    </div>\n                                    <div className=\"column\" style={{ display: \"flex\" }}>\n                                        <select value={fileExtension} onChange={onFileExtensionChange}>\n                                            {fileExtensions.map((ext, i) => <option key={i} value={ext}>{\".\"}{ext}</option>)}\n                                        </select>\n                                    </div>\n                                </div>\n                            </div>\n                            <CodeEditor\n                                language={selectedPlugin.language}\n                                onChange={onTextChanged}\n                                text={text}\n                                lineWidth={lineWidth}\n                                onScrollTopChange={setScrollTop}\n                                scrollTop={scrollTop}\n                            />\n                        </div>\n                        <div className=\"container\">\n                            <div className=\"playgroundSubTitle\">\n                                Configuration\n                            </div>\n                            <CodeEditor\n                                language={Language.Json}\n                                onChange={onConfigTextChanged}\n                                jsonSchemaUrl={selectedPlugin.configSchemaUrl}\n                                text={configText}\n                            />\n                        </div>\n                    </SplitPane>\n                    <div className=\"container\">\n                        {isLoading ? <Spinner /> : <CodeEditor\n                            language={selectedPlugin.language}\n                            text={formattedText}\n                            readonly={true}\n                            lineWidth={lineWidth}\n                            onScrollTopChange={setScrollTop}\n                            scrollTop={scrollTop}\n                        />}\n                    </div>\n                </SplitPane>\n            </SplitPane>\n        </div>\n    );\n}\n","import { PluginInfo } from \"./getPluginInfo\";\n\nexport async function getPluginDefaultConfig(plugin: PluginInfo) {\n    const response = await fetch(plugin.configSchemaUrl);\n    const json = await response.json();\n    let text = \"{\";\n    let wroteProperty = false;\n\n    for (const propertyName of Object.keys(json.properties)) {\n        if (propertyName === \"$schema\" || propertyName === \"deno\" || propertyName === \"locked\") {\n            continue;\n        }\n        const property = json.properties[propertyName];\n        let defaultValue: string | boolean | number | undefined;\n\n        if (property[\"$ref\"]) {\n            defaultValue = json.definitions[propertyName]?.default;\n        } else {\n            defaultValue = property.default;\n        }\n\n        if (defaultValue != null) {\n            if (wroteProperty) {\n                text += \",\\n\";\n            } else {\n                text += \"\\n\";\n            }\n\n            text += `  \"${propertyName}\": `;\n            if (typeof defaultValue === \"string\") {\n                text += `\"${defaultValue}\"`;\n            } else {\n                if (propertyName === \"lineWidth\") {\n                    text += \"80\";\n                } else {\n                    text += `${defaultValue.toString()}`;\n                }\n            }\n\n            wroteProperty = true;\n        }\n    }\n\n    text += \"\\n}\\n\";\n\n    return text;\n}\n","import { Language } from \"../components\";\n\nexport async function getPluginInfo(): Promise<PluginInfo[]> {\n    const response = await fetch(\"https://plugins.dprint.dev/info.json\");\n    const json = await response.json();\n    const expectedSchemaVersion = 3;\n\n    if (json.schemaVersion !== expectedSchemaVersion) {\n        throw new Error(`Expected schema version ${expectedSchemaVersion}, but found ${json.schemaVersion}.`);\n    }\n\n    const typescriptPlugin = json.latest.find((p: any) => p.configKey === \"typescript\")!;\n    const jsonPlugin = json.latest.find((p: any) => p.configKey === \"json\")!;\n    const markdownPlugin = json.latest.find((p: any) => p.configKey === \"markdown\")!;\n\n    return [{\n        url: typescriptPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/typescript-v0.json\",\n        language: Language.TypeScript,\n        fileExtensions: typescriptPlugin.fileExtensions,\n    }, {\n        url: jsonPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/json-v0.json\",\n        language: Language.Json,\n        fileExtensions: jsonPlugin.fileExtensions,\n    }, {\n        url: markdownPlugin.url,\n        configSchemaUrl: \"https://plugins.dprint.dev/schemas/markdown-v0.json\",\n        language: Language.Markdown,\n        fileExtensions: markdownPlugin.fileExtensions,\n    }];\n}\n\nexport interface PluginInfo {\n    url: string;\n    configSchemaUrl: string;\n    language: Language;\n    fileExtensions: string[];\n}\n","import { compressToEncodedURIComponent, decompressFromEncodedURIComponent } from \"lz-string\";\n\nexport class UrlSaver {\n    getUrlInfo() {\n        const locationHash = document.location.hash || \"\";\n\n        return {\n            text: getText(),\n            configText: getConfigText(),\n            language: getLanguage(),\n        };\n\n        function getText() {\n            const matches = /code\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return \"\";\n            }\n\n            try {\n                return decompress(matches[1]);\n            } catch (err) {\n                console.error(err);\n                return \"\";\n            }\n        }\n\n        function getConfigText(): string | undefined {\n            const matches = /config\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return undefined;\n            }\n\n            try {\n                return decompress(matches[1]);\n            } catch (err) {\n                console.error(err);\n                return undefined;\n            }\n        }\n\n        function getLanguage(): \"typescript\" | \"json\" | \"markdown\" {\n            const matches = /language\\/([^/]+)/.exec(locationHash);\n            if (matches == null || matches.length !== 2) {\n                return \"typescript\";\n            }\n\n            try {\n                switch (matches[1]) {\n                    case \"json\":\n                        return \"json\";\n                    case \"markdown\":\n                        return \"markdown\";\n                    case \"typescript\":\n                    default:\n                        return \"typescript\";\n                }\n            } catch (err) {\n                console.error(err);\n                return \"typescript\";\n            }\n        }\n    }\n\n    updateUrl({ text, configText, language }: { text: string; configText?: string; language?: \"typescript\" | \"json\" | \"markdown\" }) {\n        if (language == null) {\n            window.history.replaceState(\n                undefined,\n                \"\",\n                ``,\n            );\n        } else {\n            let url = `#code/${compressToEncodedURIComponent(text)}`;\n            if (configText != null) {\n                url += `/config/${compressToEncodedURIComponent(configText)}`;\n            }\n            url += `/language/${language}`;\n            window.history.replaceState(\n                undefined,\n                \"\",\n                url,\n            );\n        }\n    }\n}\n\nfunction decompress(text: string) {\n    return decompressFromEncodedURIComponent(text.trim()) || \"\"; // will be null on error\n}\n","import React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Spinner } from \"./components\";\nimport * as formatterWorker from \"./FormatterWorker\";\nimport \"./index.css\";\nimport { Playground } from \"./Playground\";\nimport { getPluginDefaultConfig, getPluginInfo, PluginInfo } from \"./plugins\";\nimport { UrlSaver } from \"./utils\";\n\nconst urlSaver = new UrlSaver();\nconst initialUrl = urlSaver.getUrlInfo();\nlet isFirstLoad = true;\n\nfunction Loader() {\n    const [plugins, setPlugins] = useState<PluginInfo[]>([]);\n    const [plugin, setPlugin] = useState<PluginInfo | undefined>();\n    const [fileExtensions, setFileExtensions] = useState<string[]>([]);\n    const [text, setText] = useState(initialUrl.text);\n    const [configText, setConfigText] = useState(initialUrl.configText ?? \"\");\n    const [defaultConfigText, setDefaultConfigText] = useState(\"\");\n    const [formattedText, setFormattedText] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        getPluginInfo().then(plugins => {\n            setPlugins(plugins);\n            setPlugin(plugins.find(p => p.language === initialUrl.language ?? \"typescript\")!);\n        }).catch(err => {\n            console.error(err);\n            alert(\"There was an error getting the plugins. Try refreshing the page or check the browser console.\");\n        });\n    }, []);\n    useEffect(() => {\n        formatterWorker.addOnFormat(text => {\n            setFormattedText(text);\n        });\n\n        formatterWorker.addOnError(err => {\n            console.error(err);\n            alert(\"There was an error with the formatter worker. Try refreshing the page or check the browser console.\");\n        });\n    }, []);\n\n    useEffect(() => {\n        if (plugin == null) {\n            return;\n        }\n\n        urlSaver.updateUrl({\n            text,\n            configText: configText === defaultConfigText ? undefined : configText,\n            language: plugin.language,\n        });\n    }, [text, configText, plugin, defaultConfigText]);\n\n    useEffect(() => {\n        setIsLoading(true);\n\n        if (plugin == null) {\n            return;\n        }\n\n        const defaultConfigPromise = getPluginDefaultConfig(plugin);\n\n        formatterWorker.loadUrl(plugin.url);\n\n        defaultConfigPromise.then(defaultConfigText => {\n            setFileExtensions([...plugin.fileExtensions]); // todo: get this from the wasm file (easy to do)\n\n            if (isFirstLoad && initialUrl.configText != null) {\n                setConfigText(initialUrl.configText);\n                isFirstLoad = false;\n            } else {\n                setConfigText(defaultConfigText);\n            }\n            setDefaultConfigText(defaultConfigText);\n            setIsLoading(false);\n        })\n            .catch(err => {\n                console.error(err);\n                alert(\"There was an error loading the plugin. Check the console or try refreshing the page.\");\n            });\n    }, [plugin]);\n\n    if (plugin == null) {\n        return <Spinner />;\n    }\n\n    return <Playground\n        text={text}\n        onTextChanged={setText}\n        configText={configText}\n        onConfigTextChanged={setConfigText}\n        formattedText={formattedText}\n        fileExtensions={fileExtensions}\n        plugins={plugins}\n        selectedPlugin={plugin}\n        onSelectPlugin={setPlugin}\n        isLoading={isLoading}\n    />;\n}\n\nReactDOM.render(<Loader />, document.getElementById(\"root\"));\n"],"sourceRoot":""}